<cmd-loading-page ng-if="guildSettingsCtrl.loading_page"></cmd-loading-page>

<section layout-fill layout ng-if="!guildSettingsCtrl.loading_page">
  <md-content layout="column" layout-padding flex=80 layout-fill md-whiteframe=1 id="main__content">
    <md-card>
      <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Instellingen</span>
          </md-card-title-text>
        </md-card-title>
      <md-card-content>
        <section layout layout-padding>
          <span flex=50 flex-gt-sm=30>Trello bord</span>
          <md-input-container class="md-block">
            <label>
              Trello bord
            </label>
            <md-select ng-model="guildSettingsCtrl.guild.trello_board" ng-change="guildSettingsCtrl.patchSettings()">
              <md-option ng-value="board.id" ng-repeat="board in guildSettingsCtrl.trello_boards">
                {{ board.name }}
              </md-option>
            </md-select>
          </md-input-container>
        </section>
        <section layout layout-padding>
          <span flex=50 flex-gt-sm=30>Done lijst</span>
          <md-input-container class="md-block">
            <label>
              Done lijst
            </label>
            <md-select ng-model="guildSettingsCtrl.guild.trello_done_list" ng-change="guildSettingsCtrl.patchSettings()">
              <md-option ng-value="list.id" ng-repeat="list in guildSettingsCtrl.trello_board_lists">
                {{ list.name }}
              </md-option>
            </md-select>
            <div class="hint text--color--grey">
              Welke lijst is de 'done' lijst
            </div>
          </md-input-container>
        </section>
      </md-card-content>
    </md-card>
  </md-content>
  <section layout="column" layout-align="space-between" layout-padding id="sidebar__content" flex=20>
    <section>
      <div class="md-headline text--color--grey">
        Team leden
      </div>
      <section layout layout-wrap>
          <span flex=100 flex-gt-md=50 layout="column" layout-align="start center" layout-padding
              ng-repeat="member in guildSettingsCtrl.guild.members">
              <img ng-if="member.user.avatar_hash" class="round" ng-src="https://trello-avatars.s3.amazonaws.com/{{member.user.avatar_hash}}/50.png">
              <img ng-if="!member.user.avatar_hash" class="round" gravatar-size="50" gravatar-src="player.user.email">
              <span style="text-align: center;">
                {{ member.user | fullUserName }}
              </span>
          </span>
      </section>
    </section>
    <section layout="column">
      <md-button layout class="success md-raised" ng-click="guildSettingsCtrl.changeGuildName($event)">
        <md-icon md-svg-src="pencil_light">
        </md-icon>
        <span flex>
          Wijzig naam
        </span>
      </md-button>
      <md-button layout class="md-warn md-raised" ng-click="guildSettingsCtrl.deleteGuild($event)">
        <md-icon md-svg-src="delete_light">
        </md-icon>
        <span flex>
          Verwijder team
        </span>
      </md-button>
    </section>
  </section>
</section>
