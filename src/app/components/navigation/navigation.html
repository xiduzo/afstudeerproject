<md-sidenav
    md-is-locked-open="$mdMedia('gt-sm') && navigationCtrl.access >= 1"
    md-component-id="main__navigation"
    id="main__navigation"
    layout="column">

    <md-toolbar ng-if="navigationCtrl.user.email" flex="none" layout="column">
        <h1 layout layout-padding layout-margin layout-align="start center">
            <md-icon class="icon--size--48"
                md-svg-icon="cmd_unicorn">
            </md-icon>
            CMD Athena
        </h1>
        <section layout layout-align="start center" layout-margin ng-if="navigationCtrl.access >= 2">
            <md-icon md-svg-src="world_light">
                <md-tooltip md-direction="right" md-delay="1000">
                    Select class
                </md-tooltip>
            </md-icon>
            <md-select flex ng-change="navigationCtrl.changedWorld()"
            ng-model="navigationCtrl.selected_world" aria-label="select class">
                <md-option ng-repeat="world in navigationCtrl.worlds" value="{{world.id}}">
                    {{ world.name }}
                </md-option>
            </md-select>
        </section>
        <section layout layout-align="start center" layout-margin>
            <md-icon md-svg-src="guild_light">
                <md-tooltip md-direction="right" md-delay="1000">
                    Select group
                </md-tooltip>
            </md-icon>
            <md-select flex ng-change="navigationCtrl.changedGuild()"
            ng-model="navigationCtrl.selected_guild" aria-label="select group">
                <md-option ng-repeat="guild in navigationCtrl.guilds" value="{{guild.id}}">
                    {{ guild.name }}
                </md-option>
            </md-select>
        </section>
    </md-toolbar>

    <!-- Adding ng-scrollbars over here will overrule the subheader effect -->
    <md-content flex>
        <section ng-repeat="group in navigationCtrl.main_navigation"
            ng-if="_.contains(group.access_levels, navigationCtrl.access)">
            <md-subheader>
                {{ group.verbose }}
            </md-subheader>
            <md-list>
                <md-list-item ng-repeat="item in group.items"
                ng-click="navigationCtrl.changeState(item.link_to)"
                    ng-class="{
                        'active_menu_item': navigationCtrl.active_menu_item == item.link_to,
                    }"
                    ng-if="_.contains(item.access_levels, navigationCtrl.access)"
                    ng-click="navigationCtrl.toggleNavigation(); navigationCtrl.active_menu_item = item.link_to">
                    <md-icon class="icon--color--black"
                    md-svg-icon="{{ item.icon }}"></md-icon>
                    <span flex>{{ item.name }}</span>
                </md-list-item>
            </md-list>
        </section>

        <!-- All users -->
        <section ng-if="navigationCtrl.access >= navigationCtrl.account_navigation.access_level">
            <md-subheader>
                {{ navigationCtrl.account_navigation.verbose }}
            </md-subheader>
            <md-list>
                <md-list-item ng-repeat="item in navigationCtrl.account_navigation.items"
                    ui-sref="{{ item.link_to }}"
                    ng-class="{
                        'active_menu_item': navigationCtrl.active_menu_item == item.link_to,
                    }"
                    ng-click="navigationCtrl.toggleNavigation(); navigationCtrl.active_menu_item = item.link_to">
                    <md-icon md-svg-icon="{{ item.icon }}"></md-icon>
                    <span flex>{{ item.name }}</span>
                </md-list-item>
                <md-list-item md-ink-ripple ng-click="navigationCtrl.logout()">
                    <md-icon md-svg-icon="settings_dark"></md-icon>
                    <span flex>Logout</span>
                </md-list-item>
            </md-list>
        </section>

    </md-content>


</md-sidenav>
