<md-toolbar md-component-id="main__toolbar" id="main__toolbar" class="md-menu-toolbar" layout layout-align="start center" ng-if="toolbarCtrl.user.id">
    <section layout flex layout-align="start center">
        <md-button aria-label="toggle menu"
            class="md-icon-button"
            ng-click="toolbarCtrl.toggleNavigation()"
            ng-if="toolbarCtrl.access >= 1"
            hide-gt-sm>
            <md-icon md-svg-icon="menu_dark">
            </md-icon>
        </md-button>
        <section layout layout-align="start center" flex>
            <md-button class="md-icon-button"
                ng-if="toolbarCtrl.back_route"
                ng-click="toolbarCtrl.changeState()">
                <md-icon md-svg-src="back_dark"></md-icon>
                <md-tooltip md-direction="right" md-delay="1000">
                    Take me back
                </md-tooltip>
            </md-button>
            <section class="md-toolbar-tools">
                <h1 class="md-title" flex>
                    <md-icon ng-if="toolbarCtrl.access <= 0" md-svg-icon="cmd_unicorn">
                    </md-icon>
                    {{ toolbarCtrl.route_title }}
                    <span ng-if="toolbarCtrl.route_subtitle">
                        - {{ toolbarCtrl.route_subtitle }}
                    </span>
                </h1>
            </section>
        </section>
        <section layout="row" layout-align="start center">
            <md-menu-bar ng-if="toolbarCtrl.access >= 1 && toolbarCtrl.guilds.length >= 1">
                <md-menu ng-if="toolbarCtrl.guilds.length >= 2">
                    <button ng-click="$mdOpenMenu()">
                        <md-icon md-svg-src="guild_dark"></md-icon>
                        <strong layout-padding>
                            {{ toolbarCtrl.selected_guild.name }}
                        </strong>
                        <md-icon md-svg-src="expand_more_dark"></md-icon>
                    </button>
                    <md-menu-content width="4">
                        <md-menu-item ng-repeat="guild in toolbarCtrl.guilds" ng-if="guild.id != toolbarCtrl.selected_guild.id" ng-click="toolbarCtrl.changeGuild(guild)">
                            <md-button uit-sref="base.account.detail">
                                {{ guild.name }}
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <section ng-if="toolbarCtrl.guilds.length === 1">
                    <button ng-disabled="true">
                        <md-icon md-svg-src="guild_dark"></md-icon>
                        <strong layout-padding>
                            {{ toolbarCtrl.selected_guild.name }}
                        </strong>
                    </button>
                </section>
            </md-menu-bar>
            <md-menu-bar ng-if="toolbarCtrl.access >= 2 && toolbarCtrl.worlds.length >= 1">
                <md-menu ng-if="toolbarCtrl.worlds.length >= 2">
                    <button ng-click="$mdOpenMenu()">
                        <md-icon md-svg-src="world_dark"></md-icon>
                        <strong layout-padding>
                            {{ toolbarCtrl.selected_world.name }}
                        </strong>
                        <md-icon md-svg-src="expand_more_dark"></md-icon>
                    </button>
                    <md-menu-content width="4">
                        <md-menu-item ng-repeat="world in toolbarCtrl.worlds" ng-if="world.id != toolbarCtrl.selected_world.id" ng-click="toolbarCtrl.changeWorld(world)">
                            <md-button uit-sref="base.account.detail">
                                {{ world.name }}
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <section ng-if="toolbarCtrl.worlds.length === 1">
                    <button ng-disabled="true">
                        <md-icon md-svg-src="world_dark"></md-icon>
                        <strong layout-padding>
                            {{ toolbarCtrl.selected_world.name }}
                        </strong>
                    </button>
                </section>
            </md-menu-bar>
            <md-menu-bar>
                <md-menu>
                    <button ng-click="$mdOpenMenu()">
                        <img class="round" gravatar-size=36 gravatar-src-once="toolbarCtrl.user.email">
                        <strong layout-padding>
                            {{ toolbarCtrl.user | fullUserName }}
                        </strong>
                        <md-icon md-svg-src="expand_more_dark"></md-icon>
                    </button>
                    <md-menu-content width="4">
                        <md-menu-item class="md-indent">
                            <md-icon md-svg-icon="person_dark"></md-icon>
                            <md-button ui-sref="base.account.detail">
                                Profile
                            </md-button>
                        </md-menu-item>
                        <md-menu-divider></md-menu-divider>
                        <md-menu-item class="md-indent">
                            <md-icon md-svg-icon="settings_dark"></md-icon>
                            <md-button ng-click="toolbarCtrl.logout()">
                                Logout
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </md-menu-bar>
        </section>
    </section>
</md-toolbar>
